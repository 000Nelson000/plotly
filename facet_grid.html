<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>facet_grid. ggplot2 2.0.0.9001</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="">

<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/highlight.css" rel="stylesheet">
<link href="css/staticdocs.css" rel="stylesheet">

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-67989-15']);
  _gaq.push(['_setDomainName', 'ggplot2.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
  </head>

  <body>
    <div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="#">ggplot2 2.0.0.9001</a>
      <div class="nav">
        <ul class="nav">
          <li><a href="index.html"><i class="icon-home icon-white"></i> Index</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

    <div class="container">
      <header>
        
      </header>
      
      <h1>Lay out panels in a grid.</h1>

<div class="row">
  <div class="span8">
    <h2>Usage</h2>
    <pre><div>facet_grid(facets, margins&nbsp;=&nbsp;FALSE, scales&nbsp;=&nbsp;"fixed", space&nbsp;=&nbsp;"fixed", shrink&nbsp;=&nbsp;TRUE, labeller&nbsp;=&nbsp;"label_value", as.table&nbsp;=&nbsp;TRUE, switch&nbsp;=&nbsp;NULL, drop&nbsp;=&nbsp;TRUE)</div></pre>
    
    <h2>Arguments</h2>
    <dl>
      <dt>facets</dt>
      <dd>a formula with the rows (of the tabular display) on the LHS
and the columns (of the tabular display) on the RHS; the dot in the
formula is used to indicate there should be no faceting on this dimension
(either row or column). The formula can also be provided as a string
instead of a classical formula object</dd>
      <dt>margins</dt>
      <dd>either a logical value or a character
vector. Margins are additional facets which contain all the data
for each of the possible values of the faceting variables. If
<code>FALSE</code>, no additional facets are included (the
default). If <code>TRUE</code>, margins are included for all faceting
variables. If specified as a character vector, it is the names of
variables for which margins are to be created.</dd>
      <dt>scales</dt>
      <dd>Are scales shared across all facets (the default,
<code>"fixed"</code>), or do they vary across rows (<code>"free_x"</code>),
columns (<code>"free_y"</code>), or both rows and columns (<code>"free"</code>)</dd>
      <dt>space</dt>
      <dd>If <code>"fixed"</code>, the default, all panels have the same size.
 If <code>"free_y"</code> their height will be proportional to the length of the
 y scale; if <code>"free_x"</code> their width will be proportional to the
length of the x scale; or if <code>"free"</code> both height and width will
vary.  This setting has no effect unless the appropriate scales also vary.</dd>
      <dt>shrink</dt>
      <dd>If <code>TRUE</code>, will shrink scales to fit output of
statistics, not raw data. If <code>FALSE</code>, will be range of raw data
before statistical summary.</dd>
      <dt>labeller</dt>
      <dd>A function that takes one data frame of labels and
returns a list or data frame of character vectors. Each input
column corresponds to one factor. Thus there will be more than
one with formulae of the type <code>~cyl + am</code>. Each output
column gets displayed as one separate line in the strip
label. This function should inherit from the "labeller" S3 class
for compatibility with <code><a href='labeller.html'>labeller</a>()</code>. See
<code><a href='labellers.html'>label_value</a></code> for more details and pointers to other
options.</dd>
      <dt>as.table</dt>
      <dd>If <code>TRUE</code>, the default, the facets are laid out like
a table with highest values at the bottom-right. If <code>FALSE</code>, the
facets are laid out like a plot with the highest value at the top-right.</dd>
      <dt>switch</dt>
      <dd>By default, the labels are displayed on the top and
right of the plot. If <code>"x"</code>, the top labels will be
displayed to the bottom. If <code>"y"</code>, the right-hand side
labels will be displayed to the left. Can also be set to
<code>"both"</code>.</dd>
      <dt>drop</dt>
      <dd>If <code>TRUE</code>, the default, all factor levels not used in the
data will automatically be dropped. If <code>FALSE</code>, all factor levels
will be shown, regardless of whether or not they appear in the data.</dd>
    </dl>
    
    <div class="Description">
      <h2>Description</h2>

      <p>Lay out panels in a grid.</p>
  
    </div>
    
    <h2 id="examples">Examples</h2>
    <pre class="examples"><div class='input'>
p &lt;- ggplot(mtcars, aes(mpg, wt)) + geom_point()
# With one variable
p + facet_grid(. ~ cyl)
</div>
<div class='output'><iframe src="file30a94b1974e3.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>p + facet_grid(cyl ~ .)
</div>
<div class='output'><iframe src="file30a9214f835.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
# With two variables
p + facet_grid(vs ~ am)
</div>
<div class='output'><iframe src="file30a971f3791d.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>p + facet_grid(am ~ vs)
</div>
<div class='output'><iframe src="file30a91e1b5206.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>p + facet_grid(vs ~ am, margins=TRUE)
</div>
<div class='output'><iframe src="file30a9564a2fa8.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
# To change plot order of facet grid,
# change the order of variable levels with factor()

set.seed(6809)
diamonds &lt;- diamonds[sample(nrow(diamonds), 1000), ]
diamonds$cut &lt;- factor(diamonds$cut,
         levels = c(&quot;Ideal&quot;, &quot;Very Good&quot;, &quot;Fair&quot;, &quot;Good&quot;, &quot;Premium&quot;))

# Repeat first example with new order
p &lt;- ggplot(diamonds, aes(carat, ..density..)) +
        geom_histogram(binwidth = 1)
p + facet_grid(. ~ cut)
</div>
<strong class='warning'>Warning message:
is.na() applied to non-(list or vector) of type &#39;NULL&#39;</strong>
<strong class='warning'>Warning message:
is.na() applied to non-(list or vector) of type &#39;NULL&#39;</strong>
<strong class='warning'>Warning message:
is.na() applied to non-(list or vector) of type &#39;NULL&#39;</strong>
<strong class='warning'>Warning message:
is.na() applied to non-(list or vector) of type &#39;NULL&#39;</strong>
<strong class='warning'>Warning message:
is.na() applied to non-(list or vector) of type &#39;NULL&#39;</strong>
<div class='output'><iframe src="file30a950497586.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
g &lt;- ggplot(mtcars, aes(mpg, wt)) +
  geom_point()
g + facet_grid(. ~ vs + am)
</div>
<div class='output'><iframe src="file30a94f48d222.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>g + facet_grid(vs + am ~ .)
</div>
<div class='output'><iframe src="file30a9392741e2.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
# You can also use strings, which makes it a little easier
# when writing functions that generate faceting specifications

p + facet_grid(&quot;cut ~ .&quot;)
</div>
<strong class='warning'>Warning message:
is.na() applied to non-(list or vector) of type &#39;NULL&#39;</strong>
<strong class='warning'>Warning message:
is.na() applied to non-(list or vector) of type &#39;NULL&#39;</strong>
<strong class='warning'>Warning message:
is.na() applied to non-(list or vector) of type &#39;NULL&#39;</strong>
<strong class='warning'>Warning message:
is.na() applied to non-(list or vector) of type &#39;NULL&#39;</strong>
<strong class='warning'>Warning message:
is.na() applied to non-(list or vector) of type &#39;NULL&#39;</strong>
<div class='output'><iframe src="file30a9528db7d9.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
# see also ?plotmatrix for the scatterplot matrix

# If there isn&#39;t any data for a given combination, that panel
# will be empty

g + facet_grid(cyl ~ vs)
</div>
<div class='output'><iframe src="file30a94d362e4b.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
# If you combine a facetted dataset with a dataset that lacks those
# facetting variables, the data will be repeated across the missing
# combinations:

g + facet_grid(vs ~ cyl)
</div>
<div class='output'><iframe src="file30a915fef71a.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
df &lt;- data.frame(mpg = 22, wt = 3)
g + facet_grid(vs ~ cyl) +
  geom_point(data = df, colour = &quot;red&quot;, size = 2)
</div>
<div class='output'><iframe src="file30a91d54df7b.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
df2 &lt;- data.frame(mpg = c(19, 22), wt = c(2,4), vs = c(0, 1))
g + facet_grid(vs ~ cyl) +
  geom_point(data = df2, colour = &quot;red&quot;, size = 2)
</div>
<div class='output'><iframe src="file30a91e633684.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
df3 &lt;- data.frame(mpg = c(19, 22), wt = c(2,4), vs = c(1, 1))
g + facet_grid(vs ~ cyl) +
  geom_point(data = df3, colour = &quot;red&quot;, size = 2)
</div>
<div class='output'><iframe src="file30a9441fe184.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>

# You can also choose whether the scales should be constant
# across all panels (the default), or whether they should be allowed
# to vary
mt &lt;- ggplot(mtcars, aes(mpg, wt, colour = factor(cyl))) +
  geom_point()

mt + facet_grid(. ~ cyl, scales = &quot;free&quot;)
</div>
<div class='output'><iframe src="file30a92422bdeb.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'># If scales and space are free, then the mapping between position
# and values in the data will be the same across all panels
mt + facet_grid(. ~ cyl, scales = &quot;free&quot;, space = &quot;free&quot;)
</div>
<div class='output'><iframe src="file30a95ec6fe1e.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
mt + facet_grid(vs ~ am, scales = &quot;free&quot;)
</div>
<div class='output'><iframe src="file30a949b57914.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>mt + facet_grid(vs ~ am, scales = &quot;free_x&quot;)
</div>
<div class='output'><iframe src="file30a953595d3.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>mt + facet_grid(vs ~ am, scales = &quot;free_y&quot;)
</div>
<div class='output'><iframe src="file30a912042fec.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>mt + facet_grid(vs ~ am, scales = &quot;free&quot;, space = &quot;free&quot;)
</div>
<div class='output'><iframe src="file30a931e9c313.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>mt + facet_grid(vs ~ am, scales = &quot;free&quot;, space = &quot;free_x&quot;)
</div>
<div class='output'><iframe src="file30a952dddc87.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>mt + facet_grid(vs ~ am, scales = &quot;free&quot;, space = &quot;free_y&quot;)
</div>
<div class='output'><iframe src="file30a94367f779.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
# You may need to set your own breaks for consistent display:
mt + facet_grid(. ~ cyl, scales = &quot;free_x&quot;, space = &quot;free&quot;) +
  scale_x_continuous(breaks = seq(10, 36, by = 2))
</div>
<div class='output'><iframe src="file30a956d60364.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'># Adding scale limits override free scales:
last_plot() + xlim(10, 15)
</div>
<strong class='error'>Error in last_plot() + xlim(10, 15): non-numeric argument to binary operator</strong>
<div class='input'>
# Free scales are particularly useful for categorical variables
ggplot(mpg, aes(cty, model)) +
  geom_point() +
  facet_grid(manufacturer ~ ., scales = &quot;free&quot;, space = &quot;free&quot;)
</div>
<div class='output'><iframe src="file30a94bf9ee46.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'># particularly when you reorder factor levels
mpg$model &lt;- reorder(mpg$model, mpg$cty)
manufacturer &lt;- reorder(mpg$manufacturer, mpg$cty)
last_plot() %+% mpg + theme(strip.text.y = element_text())
</div>
<div class='output'>NULL
</div>
<div class='input'>
# Use as.table to to control direction of horizontal facets, TRUE by default
h &lt;- ggplot(mtcars, aes(x = mpg, y = wt)) +
  geom_point()
h + facet_grid(cyl ~ vs)
</div>
<div class='output'><iframe src="file30a96290cf80.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>h + facet_grid(cyl ~ vs, as.table = FALSE)
</div>
<div class='output'><iframe src="file30a92c27e08b.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
# Use labeller to control facet labels, label_value is default
h + facet_grid(cyl ~ vs, labeller = label_both)
</div>
<div class='output'><iframe src="file30a923034b5c.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'># Using label_parsed, see ?plotmath for more options
mtcars$cyl2 &lt;- factor(mtcars$cyl, labels = c(&quot;alpha&quot;, &quot;beta&quot;, &quot;sqrt(x, y)&quot;))
k &lt;- ggplot(mtcars, aes(wt, mpg)) +
  geom_point()
k + facet_grid(. ~ cyl2)
</div>
<div class='output'><iframe src="file30a92e0b2f2a.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>k + facet_grid(. ~ cyl2, labeller = label_parsed)
</div>
<div class='output'><iframe src="file30a9710d9df.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'># For label_bquote the label value is x.
p &lt;- ggplot(mtcars, aes(wt, mpg)) +
  geom_point()
p + facet_grid(. ~ vs, labeller = label_bquote(alpha ^ .(x)))
</div>
<div class='output'><iframe src="file30a911fa9c77.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>p + facet_grid(. ~ vs, labeller = label_bquote(.(x) ^ .(x)))
</div>
<div class='output'><iframe src="file30a95e826236.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
# Margins can be specified by logically (all yes or all no) or by specific
# variables as (character) variable names
mg &lt;- ggplot(mtcars, aes(x = mpg, y = wt)) + geom_point()
mg + facet_grid(vs + am ~ gear)
</div>
<div class='output'><iframe src="file30a92820e5c1.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>mg + facet_grid(vs + am ~ gear, margins = TRUE)
</div>
<div class='output'><iframe src="file30a97a74718d.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>mg + facet_grid(vs + am ~ gear, margins = &quot;am&quot;)
</div>
<div class='output'><iframe src="file30a94b928cad.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'># when margins are made over &quot;vs&quot;, since the facets for &quot;am&quot; vary
# within the values of &quot;vs&quot;, the marginal facet for &quot;vs&quot; is also
# a margin over &quot;am&quot;.
mg + facet_grid(vs + am ~ gear, margins = &quot;vs&quot;)
</div>
<div class='output'><iframe src="file30a9465485f3.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>mg + facet_grid(vs + am ~ gear, margins = &quot;gear&quot;)
</div>
<div class='output'><iframe src="file30a969249e00.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>mg + facet_grid(vs + am ~ gear, margins = c(&quot;gear&quot;, &quot;am&quot;))
</div>
<div class='output'><iframe src="file30a93b11eaee.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
# The facet strips can be displayed near the axes with switch
data &lt;- transform(mtcars,
  am = factor(am, levels = 0:1, c(&quot;Automatic&quot;, &quot;Manual&quot;)),
  gear = factor(gear, levels = 3:5, labels = c(&quot;Three&quot;, &quot;Four&quot;, &quot;Five&quot;))
)
p &lt;- ggplot(data, aes(mpg, disp)) + geom_point()
p + facet_grid(am ~ gear, switch = &quot;both&quot;) + theme_light()
</div>
<div class='output'><iframe src="file30a95c5673eb.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
# It may be more aesthetic to use a theme without boxes around
# around the strips.
p + facet_grid(am ~ gear + vs, switch = &quot;y&quot;) + theme_minimal()
</div>
<div class='output'><iframe src="file30a9579f2da8.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>p + facet_grid(am ~ ., switch = &quot;y&quot;) +
  theme_gray() %+replace% theme(strip.background  = element_blank())
</div>
<div class='output'><iframe src="file30a9554985b.html" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'></div></pre>
  </div>
  <div class="span4">
    <!-- <ul>
      <li>facet_grid</li>
    </ul>
    <ul>
      
    </ul> -->
      
        
  </div>
</div>
      
      <footer>
      <p class="pull-right"><a href="#">Back to top</a></p>

<p class='feedback'>What do you think of the documentation?  <a href='http://hadley.wufoo.com/forms/documentation-feedback/def/field0=facet_grid'>Please let me know by filling out this short online survey</a>.</p>

<p>Built by <a href="https://github.com/hadley/staticdocs">staticdocs</a>. Styled with <a href="http://twitter.github.com/bootstrap">bootstrap</a>.</p>
      </footer>
    </div>
  </body>
</html>
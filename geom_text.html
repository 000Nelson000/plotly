<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>geom_label. ggplot2 2.0.0.9001</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="">

<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/highlight.css" rel="stylesheet">
<link href="css/staticdocs.css" rel="stylesheet">

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-67989-15']);
  _gaq.push(['_setDomainName', 'ggplot2.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
  </head>

  <body>
    <div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="#">ggplot2 2.0.0.9001</a>
      <div class="nav">
        <ul class="nav">
          <li><a href="index.html"><i class="icon-home icon-white"></i> Index</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

    <div class="container">
      <header>
        
      </header>
      
      <h1>Textual annotations.</h1>

<div class="row">
  <div class="span8">
    <h2>Usage</h2>
    <pre><div>geom_label(mapping&nbsp;=&nbsp;NULL, data&nbsp;=&nbsp;NULL, stat&nbsp;=&nbsp;"identity", position&nbsp;=&nbsp;"identity", parse&nbsp;=&nbsp;FALSE, ..., nudge_x&nbsp;=&nbsp;0, nudge_y&nbsp;=&nbsp;0, label.padding&nbsp;=&nbsp;unit(0.25, "lines"), label.r&nbsp;=&nbsp;unit(0.15, "lines"), label.size&nbsp;=&nbsp;0.25, na.rm&nbsp;=&nbsp;FALSE, show.legend&nbsp;=&nbsp;NA, inherit.aes&nbsp;=&nbsp;TRUE)</div>
<div>geom_text(mapping&nbsp;=&nbsp;NULL, data&nbsp;=&nbsp;NULL, stat&nbsp;=&nbsp;"identity", position&nbsp;=&nbsp;"identity", parse&nbsp;=&nbsp;FALSE, ..., nudge_x&nbsp;=&nbsp;0, nudge_y&nbsp;=&nbsp;0, check_overlap&nbsp;=&nbsp;FALSE, na.rm&nbsp;=&nbsp;FALSE, show.legend&nbsp;=&nbsp;NA, inherit.aes&nbsp;=&nbsp;TRUE)</div></pre>
    
    <h2>Arguments</h2>
    <dl>
      <dt>mapping</dt>
      <dd>Set of aesthetic mappings created by <code><a href='aes.html'>aes</a></code> or
<code><a href='aes_.html'>aes_</a></code>. If specified and <code>inherit.aes = TRUE</code> (the
default), is combined with the default mapping at the top level of the
plot. You only need to supply <code>mapping</code> if there isn't a mapping
defined for the plot.</dd>
      <dt>data</dt>
      <dd>A data frame. If specified, overrides the default data frame
defined at the top level of the plot.</dd>
      <dt>stat</dt>
      <dd>The statistical transformation to use on the data for this
layer, as a string.</dd>
      <dt>position</dt>
      <dd>Position adjustment, either as a string, or the result of
a call to a position adjustment function.</dd>
      <dt>parse</dt>
      <dd>If TRUE, the labels will be parsed into expressions and
displayed as described in ?plotmath</dd>
      <dt>...</dt>
      <dd>other arguments passed on to <code><a href='layer.html'>layer</a></code>. There are
  three types of arguments you can use here:

  <ul>
<li> Aesthetics: to set an aesthetic to a fixed value, like
     <code>color = "red"</code> or <code>size = 3</code>.
  </li>
<li> Other arguments to the layer, for example you override the
    default <code>stat</code> associated with the layer.
  </li>
<li> Other arguments passed on to the stat.
  </li>
</ul>
</dd>
      <dt>nudge_x, nudge_y</dt>
      <dd>Horizontal and vertical adjustment to nudge labels by.
Useful for offsetting text from points, particularly on discrete scales.</dd>
      <dt>label.padding</dt>
      <dd>Amount of padding around label. Defaults to 0.25 lines.</dd>
      <dt>label.r</dt>
      <dd>Radius of rounded corners. Defaults to 0.15 lines.</dd>
      <dt>label.size</dt>
      <dd>Size of label border, in mm.</dd>
      <dt>na.rm</dt>
      <dd>If <code>FALSE</code> (the default), removes missing values with
a warning.  If <code>TRUE</code> silently removes missing values.</dd>
      <dt>show.legend</dt>
      <dd>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.</dd>
      <dt>inherit.aes</dt>
      <dd>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href='borders.html'>borders</a></code>.</dd>
      <dt>check_overlap</dt>
      <dd>If <code>TRUE</code>, text that overlaps previous text in the
same layer will not be plotted. A quick and dirty way</dd>
    </dl>
    
    <div class="Description">
      <h2>Description</h2>

      <p><code>geom_text</code> adds text directly to the plot. <code>geom_label</code> draws
a rectangle underneath the text, making it easier to read.</p>
  
    </div>

    <div class="Details">
      <h2>Details</h2>

      <p>Note the the "width" and "height" of a text element are 0, so stacking
and dodging text will not work by default, and axis limits are not
automatically expanded to include all text. Obviously, labels do have
height and width, but they are physical units, not data units. The amount of
space they occupy on that plot is not constant in data units: when you
resize a plot, labels stay the same size, but the size of the axes changes.</p>
  
    </div>

    <div class="Aesthetics">
      <h2>Aesthetics</h2>

      <p></p>
  
      <p><code>geom_text</code> understands the following aesthetics (required aesthetics are in bold):</p>
  
      <p><ul>
<li> <code><strong>label</strong></code>
  </li>
<li> <code><strong>x</strong></code>
  </li>
<li> <code><strong>y</strong></code>
  </li>
<li> <code>alpha</code>
  </li>
<li> <code>angle</code>
  </li>
<li> <code>colour</code>
  </li>
<li> <code>family</code>
  </li>
<li> <code>fontface</code>
  </li>
<li> <code>hjust</code>
  </li>
<li> <code>lineheight</code>
  </li>
<li> <code>size</code>
  </li>
<li> <code>vjust</code>
</li>
</ul></p>
  
      <p></p>
  
    </div>

    <div class="<code>geom_label</code>">
      <h2><code>geom_label</code></h2>

      <p></p>
  
      <p>Currently <code>geom_label</code> does not support the <code>rot</code> parameter and
is considerably slower than <code>geom_text</code>. The <code>fill</code> aesthetic
controls the background colour of the label.</p>
  
    </div>

    <div class="Alignment">
      <h2>Alignment</h2>

      <p></p>
  
      <p>You can modify text alignment with the <code>vjust</code> and <code>hjust</code>
aesthetics. These can either be a number between 0 (right/bottom) and
1 (top/left) or a character ("left", "middle", "right", "bottom", "center",
"top"). There are two special alignments: "inward" and "outward".
Inward always aligns text towards the center, and outward aligns
it away from the center</p>
  
    </div>
    
    <h2 id="examples">Examples</h2>
    <pre class="examples"><div class='input'>p &lt;- ggplot(mtcars, aes(wt, mpg, label = rownames(mtcars)))

p + geom_text()
</div>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8510</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8510" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'># Avoid overlaps
p + geom_text(check_overlap = TRUE)
</div>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8512</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8512" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'># Labels with background
p + geom_label()
</div>
<strong class='warning'>Warning message:
geom_label has yet to be implemented in plotly.
  If you&#39;d like to see this geom implemented,
  Please open an issue with your example code at
  https://github.com/ropensci/plotly/issues</strong>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8514</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8514" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'># Change size of the label
p + geom_text(size = 10)
</div>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8516</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8516" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
# Set aesthetics to fixed value
p + geom_point() + geom_text(hjust = 0, nudge_x = 0.05)
</div>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8518</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8518" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>p + geom_point() + geom_text(vjust = 0, nudge_y = 0.5)
</div>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8520</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8520" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>p + geom_point() + geom_text(angle = 45)
</div>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8522</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8522" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>## Not run: 
# p + geom_text(family = &quot;Times New Roman&quot;)
# ## End(Not run)

# Add aesthetic mappings
p + geom_text(aes(colour = factor(cyl)))
</div>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8524</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8524" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>p + geom_text(aes(colour = factor(cyl))) +
  scale_colour_discrete(l = 40)
</div>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8526</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8526" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>p + geom_label(aes(fill = factor(cyl)), colour = &quot;white&quot;, fontface = &quot;bold&quot;)
</div>
<strong class='warning'>Warning message:
geom_label has yet to be implemented in plotly.
  If you&#39;d like to see this geom implemented,
  Please open an issue with your example code at
  https://github.com/ropensci/plotly/issues</strong>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8528</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8528" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
p + geom_text(aes(size = wt))
</div>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8530</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8530" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'># Scale height of text, rather than sqrt(height)
p + geom_text(aes(size = wt)) + scale_radius(range = c(3,6))
</div>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8532</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8532" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
# You can display expressions by setting parse = TRUE.  The
# details of the display are described in ?plotmath, but note that
# geom_text uses strings, not expressions.
p + geom_text(aes(label = paste(wt, &quot;^(&quot;, cyl, &quot;)&quot;, sep = &quot;&quot;)),
  parse = TRUE)
</div>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8534</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8534" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
# Add a text annotation
p +
  geom_text() +
  annotate(&quot;text&quot;, label = &quot;plot mpg vs. wt&quot;, x = 2, y = 15, size = 8, colour = &quot;red&quot;)
</div>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8536</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8536" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>

# Aligning labels and bars --------------------------------------------------
df &lt;- data.frame(
  x = factor(c(1, 1, 2, 2)),
  y = c(1, 3, 2, 1),
  grp = c(&quot;a&quot;, &quot;b&quot;, &quot;a&quot;, &quot;b&quot;)
)

# ggplot2 doesn&#39;t know you want to give the labels the same virtual width
# as the bars:
ggplot(data = df, aes(x, y, fill = grp, label = y)) +
  geom_bar(stat = &quot;identity&quot;, position = &quot;dodge&quot;) +
  geom_text(position = &quot;dodge&quot;)
</div>
<strong class='warning'>Warning message:
Width not defined. Set with `position_dodge(width = ?)`</strong>
<strong class='warning'>Warning message:
Width not defined. Set with `position_dodge(width = ?)`</strong>
<strong class='warning'>Warning message:
Width not defined. Set with `position_dodge(width = ?)`</strong>
<strong class='warning'>Warning message:
Width not defined. Set with `position_dodge(width = ?)`</strong>
<strong class='warning'>Warning message:
Width not defined. Set with `position_dodge(width = ?)`</strong>
<strong class='warning'>Warning message:
Width not defined. Set with `position_dodge(width = ?)`</strong>
<strong class='warning'>Warning message:
Width not defined. Set with `position_dodge(width = ?)`</strong>
<strong class='warning'>Warning message:
Width not defined. Set with `position_dodge(width = ?)`</strong>
<strong class='warning'>Warning message:
Width not defined. Set with `position_dodge(width = ?)`</strong>
<strong class='warning'>Warning message:
Width not defined. Set with `position_dodge(width = ?)`</strong>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8538</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8538" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'># So tell it:
ggplot(data = df, aes(x, y, fill = grp, label = y)) +
  geom_bar(stat = &quot;identity&quot;, position = &quot;dodge&quot;) +
  geom_text(position = position_dodge(0.9))
</div>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8540</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8540" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'># Use you can&#39;t nudge and dodge text, so instead adjust the y postion
ggplot(data = df, aes(x, y, fill = grp, label = y)) +
  geom_bar(stat = &quot;identity&quot;, position = &quot;dodge&quot;) +
  geom_text(aes(y = y + 0.05), position = position_dodge(0.9), vjust = 0)
</div>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8542</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8542" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
# To place text in the middle of each bar in a stacked barplot, you
# need to do the computation yourself
df &lt;- transform(df, mid_y = ave(df$y, df$x, FUN = function(val) cumsum(val) - (0.5 * val)))

ggplot(data = df, aes(x, y, fill = grp, label = y)) +
 geom_bar(stat = &quot;identity&quot;) +
 geom_text(aes(y = mid_y))
</div>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8544</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8544" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>
# Justification -------------------------------------------------------------
df &lt;- data.frame(
  x = c(1, 1, 2, 2, 1.5),
  y = c(1, 2, 1, 2, 1.5),
  text = c(&quot;bottom-left&quot;, &quot;bottom-right&quot;, &quot;top-left&quot;, &quot;top-right&quot;, &quot;center&quot;)
)
ggplot(df, aes(x, y)) +
  geom_text(aes(label = text))
</div>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8546</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8546" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'>ggplot(df, aes(x, y)) +
  geom_text(aes(label = text), vjust = &quot;inward&quot;, hjust = &quot;inward&quot;)
</div>
<strong class='message'>Success! Created a new plotly here -&gt; https://plot.ly/~cpsievert/8548</strong>
<div class='output'><iframe src="https://plot.ly/~cpsievert/8548" width="100%" height="400" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe></div>
<div class='input'></div></pre>
  </div>
  <div class="span4">
    <!-- <ul>
      <li>geom_label</li><li>geom_text</li>
    </ul>
    <ul>
      
    </ul> -->
      
        
  </div>
</div>
      
      <footer>
      <p class="pull-right"><a href="#">Back to top</a></p>

<p class='feedback'>What do you think of the documentation?  <a href='http://hadley.wufoo.com/forms/documentation-feedback/def/field0=geom_label'>Please let me know by filling out this short online survey</a>.</p>

<p>Built by <a href="https://github.com/hadley/staticdocs">staticdocs</a>. Styled with <a href="http://twitter.github.com/bootstrap">bootstrap</a>.</p>
      </footer>
    </div>
  </body>
</html>